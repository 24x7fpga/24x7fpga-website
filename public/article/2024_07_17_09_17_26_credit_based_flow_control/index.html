<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="author" content="Liste - https://24x7fpga.com/">
    <title>Credit-Based Flow Control | &gt; home</title>
    <meta name="description" content="A minimal hugo theme focus on content">
    <meta property="og:title" content="Credit-Based Flow Control" />
<meta property="og:description" content="Flow control is a crucial synchronization technique for data transmission. It ensures the efficient flow of data between the transmitter and the receiver by maintaining a balance between the data production rate of the sender and the data consumption rate of the receiver. The data that is being transmitted is buffered to maintain the balance between the transmitter and the receiver. The control mechanism holds the intermediate data in the buffer until the receiver is ready to process the data." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://24x7fpga.com/article/2024_07_17_09_17_26_credit_based_flow_control/" /><meta property="article:section" content="article" />
<meta property="article:published_time" content="2024-07-17T09:17:00-04:00" />
<meta property="article:modified_time" content="2024-07-17T09:17:00-04:00" />


    <meta itemprop="name" content="Credit-Based Flow Control">
<meta itemprop="description" content="Flow control is a crucial synchronization technique for data transmission. It ensures the efficient flow of data between the transmitter and the receiver by maintaining a balance between the data production rate of the sender and the data consumption rate of the receiver. The data that is being transmitted is buffered to maintain the balance between the transmitter and the receiver. The control mechanism holds the intermediate data in the buffer until the receiver is ready to process the data."><meta itemprop="datePublished" content="2024-07-17T09:17:00-04:00" />
<meta itemprop="dateModified" content="2024-07-17T09:17:00-04:00" />
<meta itemprop="wordCount" content="649">
<meta itemprop="keywords" content="article," />
    
    <link rel="canonical" href="https://24x7fpga.com/article/2024_07_17_09_17_26_credit_based_flow_control/">
    <link rel="icon" href="https://24x7fpga.com//assets/favicon.ico">
    <link rel="dns-prefetch" href="https://www.google-analytics.com">
    <link href="https://www.google-analytics.com" rel="preconnect" crossorigin>
    <link rel="alternate" type="application/atom+xml" title="&gt; home" href="https://24x7fpga.com//atom.xml" />
    <link rel="alternate" type="application/json" title="&gt; home" href="https://24x7fpga.com//feed.json" />
    <link rel="shortcut icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mNk+A8AAQUBAScY42YAAAAASUVORK5CYII=">
    
    
    <style>*,:after,:before{box-sizing:border-box;padding:0}body{font:1rem/1.5 '-apple-system',BlinkMacSystemFont,avenir next,avenir,helvetica,helvetica neue,ubuntu,roboto,noto,segoe ui,arial,sans-serif;text-rendering:optimizeLegibility;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;padding:2rem;background:#f5f5f5;color:#000}.skip-link{position:absolute;top:-40px;left:0;background:#eee;z-index:100}.skip-link:focus{top:0}header{line-height:2;padding-bottom:1.5rem}.link{overflow:hidden;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;text-decoration:none}.time{font-variant-numeric:tabular-nums;white-space:nowrap}blockquote{border-left:5px solid #eee;padding-left:1rem;margin:0}a,a:visited{color:inherit}a:hover,a.heading-link{text-decoration:none}pre{padding:.5rem;overflow:auto;overflow-x:scroll;overflow-wrap:normal}ul{list-style-type:square}ul,ol{padding-left:1.2rem}.list{line-height:2;list-style-type:none;padding-left:0}.list li{padding-bottom:.1rem}.meta{color:#777}.content{max-width:70ch;margin:0 auto}header{line-height:2;display:flex;justify-content:space-between;padding-bottom:1rem}header a{text-decoration:none}header ul{list-style-type:none;padding:0}header li,header a{display:inline}h2.post{padding-top:.5rem}header ul a:first-child{padding-left:1rem}.nav{height:1px;background:#000;content:'';max-width:10%}.list li{display:flex;align-items:baseline}.list li time{flex:initial}.hr-list{margin-top:0;margin-bottom:0;margin-right:.5rem;margin-left:.5rem;height:1px;border:0;border-bottom:1px dotted #ccc;flex:1 0 1rem}.m,hr{border:0;margin:3rem 0}img{max-width:100%;height:auto;display:block;margin-left:auto;margin-right:auto}.post-date{margin:5% 0}.index-date{color:#9a9a9a}.animate-blink{animation:opacity 1.4s infinite;opacity:1;color:#96e9ae}@keyframes opacity{0%{opacity:1}50%{opacity:.5}100%{opacity:0}}.tags{display:flex;justify-content:space-between}.tags ul{padding:0;margin:0}.tags li{display:inline}.avatar{height:250px;width:250px;position:relative;margin:-10px 0 0 15px;float:right;border-radius:50%}table{width:100%;border-collapse:collapse}th,td{border:1px solid #ddd;text-align:left;padding:8px}th{background-color:#f2f2f2}code,pre{font-family:San Francisco Mono,Monaco,consolas,lucida console,dejavu sans mono,bitstream vera sans mono,monospace;font-size:normal;font-size:small;background-color:#e9e9e9;border-radius:3px}code{border:none}.highlight pre{background-color:#e9e9e9!important;border-radius:5px} </style>
  
    
  
  
  <script type="application/ld+json">
  {
      "@context": "http://schema.org",
      "@type": "BlogPosting",
      "articleSection": "article",
      "name": "Credit-Based Flow Control",
      "headline": "Credit-Based Flow Control",
      "alternativeHeadline": "",
      "description": "Flow control is a crucial synchronization technique for data transmission. It ensures the efficient flow of data between the transmitter and the receiver by maintaining a balance between the data production rate of the sender and the data consumption rate of the receiver. The data that is being transmitted is buffered to maintain the balance between the transmitter and the receiver. The control mechanism holds the intermediate data in the buffer until the receiver is ready to process the data.",
      "inLanguage": "en-us",
      "isFamilyFriendly": "true",
      "mainEntityOfPage": {
          "@type": "WebPage",
          "@id": "https:\/\/24x7fpga.com\/article\/2024_07_17_09_17_26_credit_based_flow_control\/"
      },
      "author" : {
          "@type": "Person",
          "name": "[Kiran]"
      },
      "creator" : {
          "@type": "Person",
          "name": "[Kiran]"
      },
      "accountablePerson" : {
          "@type": "Person",
          "name": "[Kiran]"
      },
      "copyrightHolder" : "\u003e home",
      "copyrightYear" : "2024",
      "dateCreated": "2024-07-17T09:17:00.00Z",
      "datePublished": "2024-07-17T09:17:00.00Z",
      "dateModified": "2024-07-17T09:17:00.00Z",
      "publisher":{
          "@type":"Organization",
          "name": "\u003e home",
          "url": "https://24x7fpga.com/",
          "logo": {
              "@type": "ImageObject",
              "url": "https:\/\/24x7fpga.com\/assets\/favicon.ico",
              "width":"32",
              "height":"32"
          }
      },
      "image": "https://24x7fpga.com/assets/favicon.ico",
      "url" : "https:\/\/24x7fpga.com\/article\/2024_07_17_09_17_26_credit_based_flow_control\/",
      "wordCount" : "649",
      "genre" : [ "article" ],
      "keywords" : [ "article" ]
  }
  </script>
  
  
  </head>

<body>
  <a class="skip-link" href="#main">Skip to main</a>
  <main id="main">
  <div class="content">
    <header>
<p style="padding: 0;margin: 0;">
  <a href="/">
    <b>&gt; home</b>
    <span class="text-stone-500 animate-blink">â–®</span>
  </a>
</p>
<ul style="padding: 0;margin: 0;">
  
  
  <li class="">
    <a href="rtl_directory/2024_06_05_00_21_53_rtl_design_directory"><span>rtl</span></a>    
    
  <li class="">
    <a href="sv_directory/2024_06_27_16_53_00_sv_verification_directory"><span>sv</span></a>    
    
  <li class="">
    <a href="uvm_directory/2024_08_28_12_39_50_uvm_framework_directory"><span>uvm</span></a>    
    
  </li>
</ul>

</header>
<hr class="hr-list" style="padding: 0;margin: 0;">


    <section>
      <h2 class="post">Credit-Based Flow Control</h2>
      <p>Flow control is a crucial synchronization technique for data transmission. It ensures the efficient flow of data between the transmitter and the receiver by maintaining a balance between the data production rate of the sender and the data consumption rate of the receiver. The data that is being transmitted is buffered to maintain the balance between the transmitter and the receiver. The control mechanism holds the intermediate data in the buffer until the receiver is ready to process the data. The most commonly implemented control mechanism in hardware is &ldquo;Valid/Ready Handshake Protocol&rdquo;, where the sender asserts a &ldquo;valid&rdquo; signal when the data is ready to be transmitted, the receiver asserts a &ldquo;ready&rdquo; signal when it is ready to receive data, data transfer occurs only when both valid and ready signals are asserted. This mechanism was studied in detail in a pipeline design example in <a href="/article/2024_06_18_16_45_29_a_case_study_on_effective_pipeline_design_in_digital_systems/">A Case Study on Effective Pipeline Design in Digital Systems</a>. Here, we will look at a flow control mechanism that is mostly implemented in Network-on-Chips (NoCs) called credit-based flow control.</p>
<h2 id="credit-based-flow-control">Credit-Based Flow Control</h2>
<p>Credit-based flow control is a mechanism where credits (counter value) are provided to the sender based on the receiver&rsquo;s buffer size to prevent data loss and overflow. The sender transmits data to the receiver, and each time the sender transmits the data, the credit counter is decremented by one. The sender will transmit data only when the credit counter is not zero. On the receiver side, the data is received by the buffer. The receiver pops the data from the buffer when the receiver is ready to process the data. When the receiver pops the data, the receiver frees up the buffer space and sends a credit back to the sender, which increments the sender&rsquo;s credit counter.</p>
<h3 id="pipeline-module">Pipeline Module</h3>
<p>The pipeline module is implemented from the <a href="https://verilog-meetup.com/2024/06/16/focus-on-microarchitecture/">article</a>. The discussion presented here is an extension of the pipeline module with valid/ready and backpressure from this <a href="https://verilog-meetup.com/2024/06/20/a-case-study-on-effective-pipeline-design-in-digital-system/">article</a>. The control signals for the implemented pipeline module consists of only &ldquo;valid&rdquo; signal, the &ldquo;ready&rdquo; signal is stripped off from the pipeline design since a FIFO is implemented at the receiver to capture the transmitted data. The pipeline module will process the data as long as the &ldquo;valid&rdquo; is high.</p>
<h2 id="d41d8c"></h2>
<p>The figure below shows the implemented credit-based flow control with the pipeline module.</p>
<figure><img src="/ox-hugo/credit_based_flow2.png"/>
</figure>

<p>A FIFO buffer is implemented at the receiver&rsquo;s side with the size of the pipeline depth. At the start, the sender is informed of the depth size of the receiver. The &ldquo;up_vld&rdquo; is asserted when the data is ready to be transmitted. The &ldquo;up_rdy&rdquo; is asserted as long as the credit counter is not zero. The sender transmits the data only when up_vld and up_rdy are set high. The sender does not transmit the data when the credit counter is zero. At the receiver side, the FIFO receivers the transmitted data. The data from the FIFO is valid as long as the FIFO is not empty, indicating that there is data in the FIFO buffer. The &ldquo;dwn_vld&rdquo; signal is asserted when the FIFO is not empty. The &ldquo;dwn_rdy&rdquo; signal is set high when the receiver is ready to process the data. Data from the FIFO is popped when the FIFO is not empty and when the receiver is ready to process the data. When the receiver pops the data from the FIFO buffer, a credit signal is sent to the sender to increment the credit counter indicating that there is buffer space available for the sender to send more data. If the sender has sent all its credits and has not received new credits yet, it must wait. As soon as it receives new credits, it will resume sending data.</p>
<h3 id="perks">Perks</h3>
<ol>
<li>Efficient hardware utilization when compared to valid/ready control.</li>
<li>Performance of the design can be increased with increase buffer size.</li>
</ol>
<h2 id="reference">Reference</h2>
<ol>
<li><a href="https://books.google.com/books?hl=en&amp;lr=&amp;id=Hm6LaufVKFEC&amp;oi=fnd&amp;pg=PR1&amp;dq=encyclopedia+of+parallel+computing&amp;ots=uGzOcPBfmT&amp;sig=YwwAkUdRf4b50_MPzZSKh49w1mE#v=onepage&amp;q=encyclopedia%20of%20parallel%20computing&amp;f=false">Padua, David, ed. Encyclopedia of parallel computing. Springer Science &amp; Business Media, 2011.</a></li>
</ol>

      
      <div class="post-date">
        <span class="g time">July 17, 2024 </span> &#8729;
         
         <a href="https://24x7fpga.com/tags/article/">article</a>
      </div>
      
    </section>
    
  </div>
</main>
</body>
</html>
