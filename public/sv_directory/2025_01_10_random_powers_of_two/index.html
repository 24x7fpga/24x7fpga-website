<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Random Powers of Two | Home</title>
<meta name="keywords" content="cstr, sv">
<meta name="description" content="Source &ndash; Constraint Challenges &ndash; SV Verification Directory

Problem Statement
Write a SystemVerilog constraint to generate random numbers that are powers of two. The generated numbers should only include values such as 2, 4, 8, 16, 32, and so on, up to a specified maximum limit. Ensure the constraint restricts randomization to these valid values only and do not use the multiplication operator.
Problem Breakdown
Create an array to hold the numbers that are powers of two. Generate a random number that is greater than 1 and less than the specified range. Write a constraint to check if the number is power of two.">
<meta name="author" content="Kiran">
<link rel="canonical" href="https://24x7fpga.com/sv_directory/2025_01_10_random_powers_of_two/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.28ee19e1ed9d982499c62390d2acb416195f5655651bae2a84b5090fab8908e0.css" integrity="sha256-KO4Z4e2dmCSZxiOQ0qy0FhlfVlVlG64qhLUJD6uJCOA=" rel="preload stylesheet" as="style">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

<link rel="icon" href="https://24x7fpga.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://24x7fpga.com/assets/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://24x7fpga.com/assets/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://24x7fpga.com/assets/apple-touch-icon.png">
<link rel="mask-icon" href="https://24x7fpga.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://24x7fpga.com/sv_directory/2025_01_10_random_powers_of_two/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

<link rel="stylesheet" href="../../zcustom.css">


<meta property="og:title" content="Random Powers of Two" />
<meta property="og:description" content="Source &ndash; Constraint Challenges &ndash; SV Verification Directory

Problem Statement
Write a SystemVerilog constraint to generate random numbers that are powers of two. The generated numbers should only include values such as 2, 4, 8, 16, 32, and so on, up to a specified maximum limit. Ensure the constraint restricts randomization to these valid values only and do not use the multiplication operator.
Problem Breakdown
Create an array to hold the numbers that are powers of two. Generate a random number that is greater than 1 and less than the specified range. Write a constraint to check if the number is power of two." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://24x7fpga.com/sv_directory/2025_01_10_random_powers_of_two/" /><meta property="article:section" content="sv_directory" />
<meta property="article:published_time" content="2025-01-10T19:30:00-05:00" />
<meta property="article:modified_time" content="2025-01-10T19:30:00-05:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Random Powers of Two"/>
<meta name="twitter:description" content="Source &ndash; Constraint Challenges &ndash; SV Verification Directory

Problem Statement
Write a SystemVerilog constraint to generate random numbers that are powers of two. The generated numbers should only include values such as 2, 4, 8, 16, 32, and so on, up to a specified maximum limit. Ensure the constraint restricts randomization to these valid values only and do not use the multiplication operator.
Problem Breakdown
Create an array to hold the numbers that are powers of two. Generate a random number that is greater than 1 and less than the specified range. Write a constraint to check if the number is power of two."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Sv_directories",
      "item": "https://24x7fpga.com/sv_directory/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Random Powers of Two",
      "item": "https://24x7fpga.com/sv_directory/2025_01_10_random_powers_of_two/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Random Powers of Two",
  "name": "Random Powers of Two",
  "description": "Source \u0026ndash; Constraint Challenges \u0026ndash; SV Verification Directory\nProblem Statement Write a SystemVerilog constraint to generate random numbers that are powers of two. The generated numbers should only include values such as 2, 4, 8, 16, 32, and so on, up to a specified maximum limit. Ensure the constraint restricts randomization to these valid values only and do not use the multiplication operator.\nProblem Breakdown Create an array to hold the numbers that are powers of two. Generate a random number that is greater than 1 and less than the specified range. Write a constraint to check if the number is power of two.\n",
  "keywords": [
    "cstr", "sv"
  ],
  "articleBody": "Source – Constraint Challenges – SV Verification Directory\nProblem Statement Write a SystemVerilog constraint to generate random numbers that are powers of two. The generated numbers should only include values such as 2, 4, 8, 16, 32, and so on, up to a specified maximum limit. Ensure the constraint restricts randomization to these valid values only and do not use the multiplication operator.\nProblem Breakdown Create an array to hold the numbers that are powers of two. Generate a random number that is greater than 1 and less than the specified range. Write a constraint to check if the number is power of two.\nCreate an Array of Powers of Two: First, define an array to hold all numbers that are powers of two within the specified range. For example, if the range is up to 64, the array will include {1,2,4,8,16,32,64}. Generate a Random Number: Randomize a number within the range greater than 1 and less than the specified upper limit. Constraint to Validate: Write a constraint to ensure the generated number is a power of two. If the number is a power of two add it to the array if not continue generating random numbers. Implementation: Version 1 In SystemVerilog, the built-in function called $onehot whih is used to check if a given vector consists of only one set bit. Write a constraint that checks whether the generated random number has only one set bit in the vector. If its true add the number in the array in post_randomize function.\nIn SystemVerilog, the built-in function $onehot is used to determine if a given vector has exactly one bit set to 1. This functionality is highly useful when generating random numbers that need to follow a one-hot encoding pattern.\nConstraint for One-Hot Validation: Use the $onehot function in a constraint to check if the generated random number is one-hot encoded (i.e., it has only one bit set to 1).\nStore Valid Numbers in an Array: After randomization, use the post_randomize function to store the number in array. The constraint will ensure the generated random number is a power of two.\nclass cstrs_challenge1 #(parameter N = 32, R = 100); // class properties rand bit [N-1:0] num; bit [N-1:0]\tarr[$]; // constraints constraint c1 {num \u003e 1; num \u003c= R; !(num inside {arr});} constraint c2 {$onehot(num);} // post randomize function void post_randomize(); arr.push_back(num); endfunction // post_randomize // display function function void disp(); foreach(arr[i]) $display(\"arr[%d] = %d\", i, arr[i]); endfunction // disp endclass // cstrs_challenge1 Implementation: Version 2 In the second implementation, a mathematical observation is leveraged to efficiently generate random numbers that are powers of two. Let’s break it down with an example:\nConsider a number that is a power of two, such as 8 = 8′b1000:\nObservation: For a number that is a power of two, only one bit is set to 1 in its binary representation.\nSubtraction Trick: Subtracting 1 from a power-of-two number flips all bits below the set bit to 1. For example, 8−1=7=8′b01118−1=7=8′b0111.\nBitwise AND: Performing a bitwise AND operation between the original number and the result of the subtraction gives 0, 8 \u0026 7 = 8′b1000 \u0026 8′b0111 = 8′b0000.\nclass cstrs_challenge2 #(parameter N = 32, R = 100); // class properties rand bit [N-1:0] num; bit [N-1:0]\tarr[$]; // constraint constraint c1 {num \u003e 1; num \u003c= R; !(num inside {arr});} constraint c2 {(num \u0026 (num-1)) == 0;} // post randomize function void post_randomize(); arr.push_back(num); endfunction // post_randomize // display function function void disp(); foreach(arr[i]) $display(\"arr[%d] = %d\", i, arr[i]); endfunction // disp endclass // cstrs_challenge2 Implementation: Version 3 In the third implementation, a simple yet effective approach is used to generate powers of two. Instead of directly randomizing the number, we randomize the bit position and set it high while keeping all other bits as 0.\nRandomize the Bit Position: Generate a random number within the range of the bit width. This number represents the position of the bit to be set.\nSet the Bit High: The left shift operator (\u003c\u003c) is used to set a specific bit high in a the vector based on a randomly generated bit position.\nclass cstrs_challenge3 #(parameter N = 32, R = 100); // class properties rand bit [N-1:0] num; bit [N-1:0]\tarr[$]; // constraint constraint c1 {num \u003e 1; num \u003c= $clog2(R);} // post randomize function void post_randomize(); arr.push_back(1 \u003c\u003c num); endfunction // post_randomize // display function function void disp(); foreach(arr[i]) $display(\"arr[%d] = %d\", i, arr[i]); endfunction // disp endclass // cstrs_challenge3 ",
  "wordCount" : "747",
  "inLanguage": "en",
  "datePublished": "2025-01-10T19:30:00-05:00",
  "dateModified": "2025-01-10T19:30:00-05:00",
  "author":[{
    "@type": "Person",
    "name": "Kiran"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://24x7fpga.com/sv_directory/2025_01_10_random_powers_of_two/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Home",
    "logo": {
      "@type": "ImageObject",
      "url": "https://24x7fpga.com/favicon.ico"
    }
  }
}
</script><link rel="stylesheet" href="/css/syntax.css" !important>

</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>


<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://24x7fpga.com/" accesskey="h" title="Home (Alt + H)">Home</a>
            
            
            <div class="vertical-line" style="height: 20px;"></div>
            
            
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://24x7fpga.com/rtl_directory/2024_06_05_00_21_53_rtl_design_directory" title="rtl">
                    <span> 


                           
                        
                         
                        rtl</span>  
                </a>
            </li>
            <li>
                <a href="https://24x7fpga.com/sv_directory/2024_06_27_16_53_00_sv_verification_directory" title="sv">
                    <span> 


                           
                        
                         
                        sv</span>  
                </a>
            </li>
            <li>
                <a href="https://24x7fpga.com/uvm_directory/2024_08_28_12_39_50_uvm_framework_directory" title="uvm">
                    <span> 


                           
                        
                         
                        uvm</span>  
                </a>
            </li>
            <li>
                <a href="https://24x7fpga.com/tags/" title="">
                    <span> 


                           
                        
                            
                    
                    
                    

                    
                    
                    

                    
                    
                    
                    


                    
                    
                    
                    

                    
                    
                    
                    
                    
                    
                    
                    
                
                         
                        
                        <div style="text-decoration: none">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 15"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" style="text-decoration: none">
                            <path d="M21 18V6H8L2 12L8 18H21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 12C12 13.1046 11.1046 14 10 14C8.89543 14 8 13.1046 8 12C8 10.8954 8.89543 10 10 10C11.1046 10 12 10.8954 12 12Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                        <line x1="7" y1="7" x2="7" y2="7"></line>
                        </svg> 
                        </div>
                        </span>  
                </a>
            </li>
        </ul>
    </nav>
</header>







<script src="https://24x7fpga.com/js/mathjax-config.js"></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Random Powers of Two
    </h1>
    <div class="post-meta"><span title='2025-01-10 19:30:00 -0500 EST'>January 10, 2025</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;747 words&nbsp;·&nbsp;Kiran

</div>
  </header> 
  <div class="post-content"><p><a href="https://github.com/24x7fpga/SV/tree/main/sv_verification/cstrs_challenges/pwr_two">Source</a> &ndash; <a href="/sv_directory/2024_11_12_18_40_22_constraint_challenges/">Constraint Challenges</a> &ndash; <a href="/sv_directory/2024_06_27_16_53_00_sv_verification_directory/">SV Verification Directory</a></p>
<h2 id="d41d8c"><a hidden class="anchor" aria-hidden="true" href="#d41d8c">#</a></h2>
<h3 id="problem-statement">Problem Statement<a hidden class="anchor" aria-hidden="true" href="#problem-statement">#</a></h3>
<p>Write a SystemVerilog constraint to generate random numbers that are powers of two. The generated numbers should only include values such as 2, 4, 8, 16, 32, and so on, up to a specified maximum limit. Ensure the constraint restricts randomization to these valid values only and <strong>do not</strong> use the multiplication operator.</p>
<h3 id="problem-breakdown">Problem Breakdown<a hidden class="anchor" aria-hidden="true" href="#problem-breakdown">#</a></h3>
<p>Create an array to hold the numbers that are powers of two. Generate a random number that is greater than 1 and less than the specified range. Write a constraint to check if the number is power of two.</p>
<ul>
<li>Create an Array of Powers of Two: First, define an array to hold all numbers that are powers of two within the specified range. For example, if the range is up to 64, the array will include {1,2,4,8,16,32,64}.</li>
<li>Generate a Random Number: Randomize a number within the range greater than 1 and less than the specified upper limit.</li>
<li>Constraint to Validate: Write a constraint to ensure the generated number is a power of two. If the number is a power of two add it to the array if not continue generating random numbers.</li>
</ul>
<h3 id="implementation-version-1">Implementation: Version 1<a hidden class="anchor" aria-hidden="true" href="#implementation-version-1">#</a></h3>
<p>In SystemVerilog, the built-in function called <code>$onehot</code> whih is used to check if a given vector consists of only one set bit. Write a constraint that checks whether the generated random number has only one set bit in the vector. If its true add the number in the array in <code>post_randomize</code> function.</p>
<p>In SystemVerilog, the built-in function <code>$onehot</code> is used to determine if a given vector has exactly one bit set to 1. This functionality is highly useful when generating random numbers that need to follow a one-hot encoding pattern.</p>
<ul>
<li>
<p>Constraint for One-Hot Validation: Use the <code>$onehot</code> function in a constraint to check if the generated random number is one-hot encoded (i.e., it has only one bit set to 1).</p>
</li>
<li>
<p>Store Valid Numbers in an Array: After randomization, use the <code>post_randomize</code> function to store the number in array. The constraint will ensure the generated random number is a power of two.</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-verilog" data-lang="verilog"><span style="display:flex;"><span> class cstrs_challenge1 #(<span style="color:#66d9ef">parameter</span> N <span style="color:#f92672">=</span> <span style="color:#ae81ff">32</span>, R <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// class properties
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   rand <span style="color:#66d9ef">bit</span> [N<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>] num;
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">bit</span> [N<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>]	    arr[<span style="color:#960050;background-color:#1e0010">$</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// constraints
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   constraint c1 {num <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>; num <span style="color:#f92672">&lt;=</span> R; <span style="color:#f92672">!</span>(num inside {arr});}
</span></span><span style="display:flex;"><span>   constraint c2 {$onehot(num);}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// post randomize
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#66d9ef">function</span> <span style="color:#66d9ef">void</span> post_randomize();
</span></span><span style="display:flex;"><span>     arr.push_back(num);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">endfunction</span> <span style="color:#75715e">// post_randomize
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// display function
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#66d9ef">function</span> <span style="color:#66d9ef">void</span> disp();
</span></span><span style="display:flex;"><span>      foreach(arr[i])
</span></span><span style="display:flex;"><span>        $display(<span style="color:#e6db74">&#34;arr[%d] = %d&#34;</span>, i, arr[i]);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">endfunction</span> <span style="color:#75715e">// disp
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>endclass <span style="color:#75715e">// cstrs_challenge1
</span></span></span></code></pre></div><h3 id="implementation-version-2">Implementation: Version 2<a hidden class="anchor" aria-hidden="true" href="#implementation-version-2">#</a></h3>
<p>In the second implementation, a mathematical observation is leveraged to efficiently generate random numbers that are powers of two. Let’s break it down with an example:</p>
<p>Consider a number that is a power of two, such as 8 = 8′b1000:</p>
<ul>
<li>
<p>Observation: For a number that is a power of two, only one bit is set to 1 in its binary representation.</p>
</li>
<li>
<p>Subtraction Trick: Subtracting 1 from a power-of-two number flips all bits below the set bit to 1. For example, 8−1=7=8′b01118−1=7=8′b0111.</p>
</li>
<li>
<p>Bitwise AND: Performing a bitwise AND operation between the original number and the result of the subtraction gives 0, 8 &amp; 7 = 8′b1000 &amp; 8′b0111 = 8′b0000.</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-verilog" data-lang="verilog"><span style="display:flex;"><span>class cstrs_challenge2 #(<span style="color:#66d9ef">parameter</span> N <span style="color:#f92672">=</span> <span style="color:#ae81ff">32</span>, R <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// class properties
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   rand <span style="color:#66d9ef">bit</span> [N<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>] num;
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">bit</span> [N<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>]	    arr[<span style="color:#960050;background-color:#1e0010">$</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// constraint
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   constraint c1 {num <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>; num <span style="color:#f92672">&lt;=</span> R; <span style="color:#f92672">!</span>(num inside {arr});}
</span></span><span style="display:flex;"><span>   constraint c2 {(num <span style="color:#f92672">&amp;</span> (num<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>)) <span style="color:#f92672">==</span> <span style="color:#ae81ff">0</span>;}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// post randomize
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#66d9ef">function</span> <span style="color:#66d9ef">void</span> post_randomize();
</span></span><span style="display:flex;"><span>     arr.push_back(num);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">endfunction</span> <span style="color:#75715e">// post_randomize
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// display function
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#66d9ef">function</span> <span style="color:#66d9ef">void</span> disp();
</span></span><span style="display:flex;"><span>      foreach(arr[i])
</span></span><span style="display:flex;"><span>        $display(<span style="color:#e6db74">&#34;arr[%d] = %d&#34;</span>, i, arr[i]);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">endfunction</span> <span style="color:#75715e">// disp
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>endclass <span style="color:#75715e">// cstrs_challenge2
</span></span></span></code></pre></div><h3 id="implementation-version-3">Implementation: Version 3<a hidden class="anchor" aria-hidden="true" href="#implementation-version-3">#</a></h3>
<p>In the third implementation, a simple yet effective approach is used to generate powers of two. Instead of directly randomizing the number, we randomize the bit position and set it high while keeping all other bits as 0.</p>
<ul>
<li>
<p>Randomize the Bit Position: Generate a random number within the range of the bit width. This number represents the position of the bit to be set.</p>
</li>
<li>
<p>Set the Bit High: The left shift operator (&lt;&lt;) is used to set a specific bit high in a the vector based on a randomly generated bit position.</p>
</li>
</ul>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-verilog" data-lang="verilog"><span style="display:flex;"><span>class cstrs_challenge3 #(<span style="color:#66d9ef">parameter</span> N <span style="color:#f92672">=</span> <span style="color:#ae81ff">32</span>, R <span style="color:#f92672">=</span> <span style="color:#ae81ff">100</span>);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// class properties
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   rand <span style="color:#66d9ef">bit</span> [N<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>] num;
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">bit</span> [N<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>]	    arr[<span style="color:#960050;background-color:#1e0010">$</span>];
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// constraint
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   constraint c1 {num <span style="color:#f92672">&gt;</span> <span style="color:#ae81ff">1</span>; num <span style="color:#f92672">&lt;=</span> $clog2(R);}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// post randomize
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#66d9ef">function</span> <span style="color:#66d9ef">void</span> post_randomize();
</span></span><span style="display:flex;"><span>      arr.push_back(<span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;&lt;</span> num);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">endfunction</span> <span style="color:#75715e">// post_randomize
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>   <span style="color:#75715e">// display function
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>   <span style="color:#66d9ef">function</span> <span style="color:#66d9ef">void</span> disp();
</span></span><span style="display:flex;"><span>      foreach(arr[i])
</span></span><span style="display:flex;"><span>        $display(<span style="color:#e6db74">&#34;arr[%d] = %d&#34;</span>, i, arr[i]);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">endfunction</span> <span style="color:#75715e">// disp
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>endclass <span style="color:#75715e">// cstrs_challenge3
</span></span></span></code></pre></div>

  </div>



  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://24x7fpga.com/tags/cstr/">Cstr</a></li>
      <li><a href="https://24x7fpga.com/tags/sv/">Sv</a></li>
    </ul>



    <div class="bottom-line" ></div>
    
    
    
      <img src="/img/org_mode.png" class="center" alt="footer" style="max-width:50px" />
    

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://24x7fpga.com/"></a></span>
        
        


</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><footer class="footer">

</footer>



<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
