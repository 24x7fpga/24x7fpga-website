<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Constraint: Weighted Distribution | Home</title>
<meta name="keywords" content="sv">
<meta name="description" content="Source &ndash; SV Verification Directory
The weighted distribution constraint is used with the dist operator to control the probability of specific values being generated during randomization. This is useful when certain values have to appear more or less frequently in a set of random outcomes.
Syntax The dist keyword is utilized to generated weighted distribution during randomization.
constraint &lt;constraint_name&gt; {varible_name dist {1 := 4, [2:5] := 8};} // value := weight constraint &lt;constraint_name&gt; {varible_name dist {1 :/ 4, [2:5] :/ 8};} // value :/ weight :=: This operator specifies that the weight is the same for every value within the specified range.">
<meta name="author" content="Kiran">
<link rel="canonical" href="https://24x7fpga.com/sv_directory/2024_10_22_14_42_44_constraint_weighted_distribution/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f0bab6ccd3c051f976cc54b360c884eb6ad144350e2d64398cc5d0cbc3213464.css" integrity="sha256-8Lq2zNPAUfl2zFSzYMiE62rRRDUOLWQ5jMXQy8MhNGQ=" rel="preload stylesheet" as="style">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

<link rel="icon" href="https://24x7fpga.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://24x7fpga.com/assets/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://24x7fpga.com/assets/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://24x7fpga.com/assets/apple-touch-icon.png">
<link rel="mask-icon" href="https://24x7fpga.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

<link rel="stylesheet" href="../../zcustom.css">


<meta property="og:title" content="Constraint: Weighted Distribution" />
<meta property="og:description" content="Source &ndash; SV Verification Directory
The weighted distribution constraint is used with the dist operator to control the probability of specific values being generated during randomization. This is useful when certain values have to appear more or less frequently in a set of random outcomes.
Syntax The dist keyword is utilized to generated weighted distribution during randomization.
constraint &lt;constraint_name&gt; {varible_name dist {1 := 4, [2:5] := 8};} // value := weight constraint &lt;constraint_name&gt; {varible_name dist {1 :/ 4, [2:5] :/ 8};} // value :/ weight :=: This operator specifies that the weight is the same for every value within the specified range." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://24x7fpga.com/sv_directory/2024_10_22_14_42_44_constraint_weighted_distribution/" /><meta property="article:section" content="sv_directory" />
<meta property="article:published_time" content="2024-10-22T14:42:00-04:00" />
<meta property="article:modified_time" content="2024-10-22T14:42:00-04:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Constraint: Weighted Distribution"/>
<meta name="twitter:description" content="Source &ndash; SV Verification Directory
The weighted distribution constraint is used with the dist operator to control the probability of specific values being generated during randomization. This is useful when certain values have to appear more or less frequently in a set of random outcomes.
Syntax The dist keyword is utilized to generated weighted distribution during randomization.
constraint &lt;constraint_name&gt; {varible_name dist {1 := 4, [2:5] := 8};} // value := weight constraint &lt;constraint_name&gt; {varible_name dist {1 :/ 4, [2:5] :/ 8};} // value :/ weight :=: This operator specifies that the weight is the same for every value within the specified range."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Sv_directories",
      "item": "https://24x7fpga.com/sv_directory/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Constraint: Weighted Distribution",
      "item": "https://24x7fpga.com/sv_directory/2024_10_22_14_42_44_constraint_weighted_distribution/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Constraint: Weighted Distribution",
  "name": "Constraint: Weighted Distribution",
  "description": "Source \u0026ndash; SV Verification Directory\nThe weighted distribution constraint is used with the dist operator to control the probability of specific values being generated during randomization. This is useful when certain values have to appear more or less frequently in a set of random outcomes.\nSyntax The dist keyword is utilized to generated weighted distribution during randomization.\nconstraint \u0026lt;constraint_name\u0026gt; {varible_name dist {1 := 4, [2:5] := 8};} // value := weight constraint \u0026lt;constraint_name\u0026gt; {varible_name dist {1 :/ 4, [2:5] :/ 8};} // value :/ weight :=: This operator specifies that the weight is the same for every value within the specified range.",
  "keywords": [
    "sv"
  ],
  "articleBody": "Source – SV Verification Directory\nThe weighted distribution constraint is used with the dist operator to control the probability of specific values being generated during randomization. This is useful when certain values have to appear more or less frequently in a set of random outcomes.\nSyntax The dist keyword is utilized to generated weighted distribution during randomization.\nconstraint \u003cconstraint_name\u003e {varible_name dist {1 := 4, [2:5] := 8};} // value := weight constraint \u003cconstraint_name\u003e {varible_name dist {1 :/ 4, [2:5] :/ 8};} // value :/ weight :=: This operator specifies that the weight is the same for every value within the specified range. :/: This operator ensures that the weight is equally divided among all values in the range. In the above example:\nFirst constraint: The probability of generating the values 1, 2, 3, 4, and 5 will follow a weighted ratio of 4 : 8 : 8 : 8 : 8, respectively. Second constraint: The probability for the same values will follow a weighted ratio of 4 : 8/4 : 8/4 : 8/4 : 8/4, which simplifies to 4 : 2 : 2 : 2 : 2. For a single value, both the := and :/= operators behave the same, as the specified weight is directly applied. However, the difference becomes evident when applied to a range of values. The probability of a value in a range when using :/ operator is calculated as:\n\\begin{equation} \\label{eq.1} Probability = \\frac{Specified \\; weight}{Total \\; number \\; of\\; values} \\end{equation}\nNote: The dist operation cannot be applied to randc variables. Additionally, the distribution expression must contain at least one rand variable to be valid.\nExample Code class const_ex; rand bit [2:0] a; rand bit [2:0] b; constraint const_1 {a dist{1:=4,[2:5]:=8};} constraint const_2 {b dist{1:/4,[2:5]:/8};} function void disp; $display(\"a = %d, b = %d\", a, b); endfunction // disp endclass // const_ex module tb_const_dist; const_ex dist_ex; bit [3:0] a1,a2,b1,b2 = 0; initial begin dist_ex = new(); for(int i = 0; i \u003c 16; i++) begin dist_ex.randomize(); dist_ex.disp; // count no. of 1s if(dist_ex.a == 1) a1 = a1+1; else a2 = a2+1; // count no. of 1s if(dist_ex.b == 1) b1 = b1+1; else b2 = b2+1; end $display(\"Occurrence of 1 in a is %d\\n\", a1, \"Occurrence of [2:5] in a is %d\\n\", a2, \"Occurrence of 1 in b is %d\\n\", b1, \"Occurrence of [2:5] in b is %d\" , b2); end endmodule // tb_const_dist ",
  "wordCount" : "401",
  "inLanguage": "en",
  "datePublished": "2024-10-22T14:42:00-04:00",
  "dateModified": "2024-10-22T14:42:00-04:00",
  "author":[{
    "@type": "Person",
    "name": "Kiran"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://24x7fpga.com/sv_directory/2024_10_22_14_42_44_constraint_weighted_distribution/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Home",
    "logo": {
      "@type": "ImageObject",
      "url": "https://24x7fpga.com/favicon.ico"
    }
  }
}
</script><link rel="stylesheet" href="/css/syntax.css" !important>

</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>


<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://24x7fpga.com/" accesskey="h" title="Home (Alt + H)">Home</a>
            
            
            <div class="vertical-line" style="height: 20px;"></div>
            
            
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://24x7fpga.com/rtl_directory/2024_06_05_00_21_53_rtl_design_directory" title="rtl">
                    <span> 


                           
                        
                         
                        rtl</span>  
                </a>
            </li>
            <li>
                <a href="https://24x7fpga.com/sv_directory/2024_06_27_16_53_00_sv_verification_directory" title="sv">
                    <span> 


                           
                        
                         
                        sv</span>  
                </a>
            </li>
            <li>
                <a href="https://24x7fpga.com/uvm_directory/2024_08_28_12_39_50_uvm_framework_directory" title="uvm">
                    <span> 


                           
                        
                         
                        uvm</span>  
                </a>
            </li>
            <li>
                <a href="https://24x7fpga.com/tags/" title="">
                    <span> 


                           
                        
                            
                    
                    
                    

                    
                    
                    

                    
                    
                    
                    


                    
                    
                    
                    

                    
                    
                    
                    
                    
                    
                    
                    
                
                         
                        
                        <div style="text-decoration: none">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 15"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" style="text-decoration: none">
                            <path d="M21 18V6H8L2 12L8 18H21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 12C12 13.1046 11.1046 14 10 14C8.89543 14 8 13.1046 8 12C8 10.8954 8.89543 10 10 10C11.1046 10 12 10.8954 12 12Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                        <line x1="7" y1="7" x2="7" y2="7"></line>
                        </svg> 
                        </div>
                        </span>  
                </a>
            </li>
        </ul>
    </nav>
</header>







<script src="https://24x7fpga.com/js/mathjax-config.js"></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Constraint: Weighted Distribution
    </h1>
    <div class="post-meta"><span title='2024-10-22 14:42:00 -0400 EDT'>October 22, 2024</span>&nbsp;·&nbsp;2 min&nbsp;·&nbsp;401 words&nbsp;·&nbsp;Kiran

</div>
  </header> 
  <div class="post-content"><p><a href="https://github.com/24x7fpga/SystemVerilog_Verification/blob/main/sv_verification/const_dist/tb_const_dist.sv">Source</a> &ndash; <a href="/sv_directory/2024_06_27_16_53_00_sv_verification_directory/">SV Verification Directory</a></p>
<p>The weighted distribution constraint is used with the <code>dist</code> operator to control the probability of specific values being generated during randomization. This is useful when certain values have to appear more or less frequently in a set of random outcomes.</p>
<h4 id="syntax">Syntax<a hidden class="anchor" aria-hidden="true" href="#syntax">#</a></h4>
<p>The <code>dist</code> keyword is utilized to generated weighted distribution during randomization.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-verilog" data-lang="verilog"><span style="display:flex;"><span>constraint <span style="color:#f92672">&lt;</span>constraint_name<span style="color:#f92672">&gt;</span> {varible_name dist {<span style="color:#ae81ff">1</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">4</span>, [<span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>] <span style="color:#f92672">:=</span> <span style="color:#ae81ff">8</span>};}   <span style="color:#75715e">// value := weight
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>constraint <span style="color:#f92672">&lt;</span>constraint_name<span style="color:#f92672">&gt;</span> {varible_name dist {<span style="color:#ae81ff">1</span> <span style="color:#f92672">:/</span> <span style="color:#ae81ff">4</span>, [<span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>] <span style="color:#f92672">:/</span> <span style="color:#ae81ff">8</span>};}   <span style="color:#75715e">// value :/ weight
</span></span></span></code></pre></div><ul>
<li><code>:=</code>: This operator specifies that the weight is the same for every value within the specified range.</li>
<li><code>:/</code>: This operator ensures that the weight is equally divided among all values in the range.</li>
</ul>
<p>In the above example:</p>
<ul>
<li>First constraint: The probability of generating the values 1, 2, 3, 4, and 5 will follow a weighted ratio of 4 : 8 : 8 : 8 : 8, respectively.</li>
<li>Second constraint: The probability for the same values will follow a weighted ratio of 4 : 8/4 : 8/4 : 8/4 : 8/4, which simplifies to 4 : 2 : 2 : 2 : 2.</li>
</ul>
<p>For a single value, both the <code>:=</code> and <code>:/=</code> operators behave the same, as the specified weight is directly applied. However, the difference becomes evident when applied to a range of values. The probability of a value in a range when using <code>:/</code> operator is calculated as:</p>
<p>\begin{equation}
\label{eq.1}
Probability = \frac{Specified \;  weight}{Total \; number \; of\; values}
\end{equation}</p>
<h2 id="d41d8c"><a hidden class="anchor" aria-hidden="true" href="#d41d8c">#</a></h2>
<p><code>Note</code>: The <code>dist</code> operation cannot be applied to <code>randc</code> variables. Additionally, the distribution expression must contain at least one rand variable to be valid.</p>
<h4 id="example-code">Example Code<a hidden class="anchor" aria-hidden="true" href="#example-code">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-verilog" data-lang="verilog"><span style="display:flex;"><span>class const_ex;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   rand <span style="color:#66d9ef">bit</span> [<span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>] a;
</span></span><span style="display:flex;"><span>   rand <span style="color:#66d9ef">bit</span> [<span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>] b;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   constraint const_1 {a dist{<span style="color:#ae81ff">1</span><span style="color:#f92672">:=</span><span style="color:#ae81ff">4</span>,[<span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>]<span style="color:#f92672">:=</span><span style="color:#ae81ff">8</span>};}
</span></span><span style="display:flex;"><span>   constraint const_2 {b dist{<span style="color:#ae81ff">1</span><span style="color:#f92672">:/</span><span style="color:#ae81ff">4</span>,[<span style="color:#ae81ff">2</span><span style="color:#f92672">:</span><span style="color:#ae81ff">5</span>]<span style="color:#f92672">:/</span><span style="color:#ae81ff">8</span>};}
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">function</span> <span style="color:#66d9ef">void</span> disp;
</span></span><span style="display:flex;"><span>      $display(<span style="color:#e6db74">&#34;a = %d, b = %d&#34;</span>, a, b);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">endfunction</span> <span style="color:#75715e">// disp
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>endclass <span style="color:#75715e">// const_ex
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">module</span> tb_const_dist;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   const_ex dist_ex;
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">bit</span> [<span style="color:#ae81ff">3</span><span style="color:#f92672">:</span><span style="color:#ae81ff">0</span>] a1,a2,b1,b2 <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">initial</span> <span style="color:#66d9ef">begin</span>
</span></span><span style="display:flex;"><span>      dist_ex <span style="color:#f92672">=</span> new();
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">for</span>(<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">16</span>; i<span style="color:#f92672">++</span>) <span style="color:#66d9ef">begin</span>
</span></span><span style="display:flex;"><span>         dist_ex.randomize();
</span></span><span style="display:flex;"><span>         dist_ex.disp;
</span></span><span style="display:flex;"><span>         <span style="color:#75715e">// count no. of 1s
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>         <span style="color:#66d9ef">if</span>(dist_ex.a <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>           a1 <span style="color:#f92672">=</span> a1<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>         <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>           a2 <span style="color:#f92672">=</span> a2<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>         <span style="color:#75715e">// count no. of 1s
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>         <span style="color:#66d9ef">if</span>(dist_ex.b <span style="color:#f92672">==</span> <span style="color:#ae81ff">1</span>)
</span></span><span style="display:flex;"><span>           b1 <span style="color:#f92672">=</span> b1<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>         <span style="color:#66d9ef">else</span>
</span></span><span style="display:flex;"><span>           b2 <span style="color:#f92672">=</span> b2<span style="color:#f92672">+</span><span style="color:#ae81ff">1</span>;
</span></span><span style="display:flex;"><span>      <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>      $display(<span style="color:#e6db74">&#34;Occurrence of    1  in a is %d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, a1,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#34;Occurrence of [2:5] in a is %d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, a2,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#34;Occurrence of     1 in b is %d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, b1,
</span></span><span style="display:flex;"><span>               <span style="color:#e6db74">&#34;Occurrence of [2:5] in b is %d&#34;</span>  , b2);
</span></span><span style="display:flex;"><span>   <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">endmodule</span> <span style="color:#75715e">// tb_const_dist
</span></span></span></code></pre></div>

  </div>



  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://24x7fpga.com/tags/sv/">sv</a></li>
    </ul>



    <div class="bottom-line" ></div>
    
    
    
      <img src="/img/org_mode.png" class="center" alt="footer" style="max-width:50px" />
    

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://24x7fpga.com/"></a></span>
        
        


</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><footer class="footer">

</footer>



<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
