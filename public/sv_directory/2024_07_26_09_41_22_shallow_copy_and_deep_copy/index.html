<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>Shallow Copy and Deep Copy | Home</title>
<meta name="keywords" content="sv">
<meta name="description" content="Source &ndash; SV Verification Directory
Shallow Copy and Deep Copy SystemVerilog provides two means of copying or duplicating objects to keep a method from modifying the original. The two methods are shallow copy and deep copy, and understanding these methods is crucial for effective memory management.
Shallow Copy Shallow copy is a method where the objects are duplicated to a new memory location. If the class contains a handle to another class, only the handle&rsquo;s value is copied not the lower level object, meaning both the original and copied object share the same instances of nested objects.">
<meta name="author" content="Kiran">
<link rel="canonical" href="https://24x7fpga.com/sv_directory/2024_07_26_09_41_22_shallow_copy_and_deep_copy/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.f0bab6ccd3c051f976cc54b360c884eb6ad144350e2d64398cc5d0cbc3213464.css" integrity="sha256-8Lq2zNPAUfl2zFSzYMiE62rRRDUOLWQ5jMXQy8MhNGQ=" rel="preload stylesheet" as="style">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

<link rel="icon" href="https://24x7fpga.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://24x7fpga.com/assets/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://24x7fpga.com/assets/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://24x7fpga.com/assets/apple-touch-icon.png">
<link rel="mask-icon" href="https://24x7fpga.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

<link rel="stylesheet" href="../../zcustom.css">


<meta property="og:title" content="Shallow Copy and Deep Copy" />
<meta property="og:description" content="Source &ndash; SV Verification Directory
Shallow Copy and Deep Copy SystemVerilog provides two means of copying or duplicating objects to keep a method from modifying the original. The two methods are shallow copy and deep copy, and understanding these methods is crucial for effective memory management.
Shallow Copy Shallow copy is a method where the objects are duplicated to a new memory location. If the class contains a handle to another class, only the handle&rsquo;s value is copied not the lower level object, meaning both the original and copied object share the same instances of nested objects." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://24x7fpga.com/sv_directory/2024_07_26_09_41_22_shallow_copy_and_deep_copy/" /><meta property="article:section" content="sv_directory" />
<meta property="article:published_time" content="2024-07-26T09:41:00-04:00" />
<meta property="article:modified_time" content="2024-07-26T09:41:00-04:00" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="Shallow Copy and Deep Copy"/>
<meta name="twitter:description" content="Source &ndash; SV Verification Directory
Shallow Copy and Deep Copy SystemVerilog provides two means of copying or duplicating objects to keep a method from modifying the original. The two methods are shallow copy and deep copy, and understanding these methods is crucial for effective memory management.
Shallow Copy Shallow copy is a method where the objects are duplicated to a new memory location. If the class contains a handle to another class, only the handle&rsquo;s value is copied not the lower level object, meaning both the original and copied object share the same instances of nested objects."/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Sv_directories",
      "item": "https://24x7fpga.com/sv_directory/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Shallow Copy and Deep Copy",
      "item": "https://24x7fpga.com/sv_directory/2024_07_26_09_41_22_shallow_copy_and_deep_copy/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "Shallow Copy and Deep Copy",
  "name": "Shallow Copy and Deep Copy",
  "description": "Source \u0026ndash; SV Verification Directory\nShallow Copy and Deep Copy SystemVerilog provides two means of copying or duplicating objects to keep a method from modifying the original. The two methods are shallow copy and deep copy, and understanding these methods is crucial for effective memory management.\nShallow Copy Shallow copy is a method where the objects are duplicated to a new memory location. If the class contains a handle to another class, only the handle\u0026rsquo;s value is copied not the lower level object, meaning both the original and copied object share the same instances of nested objects.",
  "keywords": [
    "sv"
  ],
  "articleBody": "Source – SV Verification Directory\nShallow Copy and Deep Copy SystemVerilog provides two means of copying or duplicating objects to keep a method from modifying the original. The two methods are shallow copy and deep copy, and understanding these methods is crucial for effective memory management.\nShallow Copy Shallow copy is a method where the objects are duplicated to a new memory location. If the class contains a handle to another class, only the handle’s value is copied not the lower level object, meaning both the original and copied object share the same instances of nested objects.\nClass assignment and Shallow Copy Class Assignment Shallow Copy obj1 = obj2 obj1 = new obj2 Both the objects point to the same memory Allocates memory, copies the variable, and returns the memory handle Changes made to any object will reflect in both Changes made to the copied objects will not reflect in the parent object Example Code: Shallow Copy The example shown below shows the example of shallow copy and the limitation of nested objects in shallow copy. Along with the difference in class assignment and shallow copy.\n// class class grade; string mrk; function new (string mrk); this.mrk = mrk; endfunction endclass // class class name; string student; grade mrk; // class handle function new (string student, string mrk); this.student = student; this.mrk = new(mrk); // construct the object endfunction endclass module tb_shallow_copy; name std1, std2, std3;\t// class handle initial begin std1 = new(\"John\", \"B\"); // construct $display(\"------------------------- Display -------------------------\"); $display(\"STD1 =\u003e Student Name = %s; Grade = %s\", std1.student, std1.mrk.mrk); std2 = new std1; // shallow copy $display(\"---------------------- Shallow Copy -----------------------\"); $display(\"STD2 =\u003e Student Name = %s; Grade = %s\", std2.student, std2.mrk.mrk); $display(\"------------------ Change Name and Grade ------------------\"); std2.student = \"Noah\"; std2.mrk.mrk = \"A\"; $display(\"STD2 =\u003e Student Name = %s; Grade = %s\", std2.student, std2.mrk.mrk); $display(\"---------------- Limitation of Shallow Copy ---------------\"); $display(\"STD1 =\u003e Student Name = %s; Grade = %s =\u003e %s's Grade is also changed\", std1.student, std1.mrk.mrk, std1.student); std3 = std1; $display(\"--------------------- Class assignment --------------------\"); $display(\"STD3 =\u003e Student Name = %s; Grade = %s\", std3.student, std3.mrk.mrk); std3.student = \"Theo\"; std3.mrk.mrk = \"C\"; $display(\"------------------ Change Name and Grade ------------------\"); $display(\"STD3 =\u003e Student Name = %s; Grade = %s\", std3.student, std3.mrk.mrk); $display(\"--------------------- Class assignment --------------------\"); $display(\"----------------- Points to the same memory ---------------\"); $display(\"----------------- Original is also changed ----------------\"); $display(\"STD1 =\u003e Student Name = %s; Grade = %s\", std1.student, std1.mrk.mrk); end endmodule Execute the code in EDA Playground\nDeep Copy One method to overcome the limitation of shallow copy is to write a copy function inside the class to make a copy of the object. This method is called deep copy, which duplicates not only the object itself but also all the objects referenced by the original object, creating independent copies of these nested objects.\nExample Code: Deep Copy // class class grade; string mrk; function new(string mrk); this.mrk = mrk; endfunction //deep copy function function grade copy(); copy = new(this.mrk); endfunction endclass // class class name; string student; grade mrk; // class handle function new(string student, string mrk); this.student = student; this.mrk = new(mrk); // construct the object endfunction // deep copy function function name copy(); copy = new(this.student, this.mrk.mrk); endfunction endclass module tb_deep_copy; name std1, std2;\t// class handle initial begin std1 = new(\"John\", \"B\"); // construct $display(\"------------------------- Display -------------------------\"); $display(\"STD1 =\u003e Student Name = %s; Grade = %s\", std1.student, std1.mrk.mrk); std2 = std1.copy(); // deep copy $display(\"----------------------- Deep Copy -------------------------\"); $display(\"STD2 =\u003e Student Name = %s; Grade = %s\", std2.student, std2.mrk.mrk); $display(\"------------------ Change Name and Grade ------------------\"); std2.student = \"Noah\"; std2.mrk.mrk = \"A\"; $display(\"STD2 =\u003e Student Name = %s; Grade = %s\", std2.student, std2.mrk.mrk); $display(\"------------------ Advantage of Deep Copy -----------------\"); $display(\"STD1 =\u003e Student Name = %s; Grade = %s =\u003e %s's Grade is NOT changed\", std1.student, std1.mrk.mrk, std1.student); end endmodule Execute the code in EDA Playground\nPoint to Remember Shallow Copy: Copies the object’s attributes but not the nested objects. Shared references to nested objects, leading to potential side effects. Faster to create but less independent. Deep Copy: Copies the object and all nested objects, creating entirely independent instances. No shared references, avoiding unintended side effects. More computationally intensive but safer for independent object manipulation. ",
  "wordCount" : "697",
  "inLanguage": "en",
  "datePublished": "2024-07-26T09:41:00-04:00",
  "dateModified": "2024-07-26T09:41:00-04:00",
  "author":[{
    "@type": "Person",
    "name": "Kiran"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://24x7fpga.com/sv_directory/2024_07_26_09_41_22_shallow_copy_and_deep_copy/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Home",
    "logo": {
      "@type": "ImageObject",
      "url": "https://24x7fpga.com/favicon.ico"
    }
  }
}
</script><link rel="stylesheet" href="/css/syntax.css" !important>

</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>


<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://24x7fpga.com/" accesskey="h" title="Home (Alt + H)">Home</a>
            
            
            <div class="vertical-line" style="height: 20px;"></div>
            
            
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://24x7fpga.com/rtl_directory/2024_06_05_00_21_53_rtl_design_directory" title="rtl">
                    <span> 


                           
                        
                         
                        rtl</span>  
                </a>
            </li>
            <li>
                <a href="https://24x7fpga.com/sv_directory/2024_06_27_16_53_00_sv_verification_directory" title="sv">
                    <span> 


                           
                        
                         
                        sv</span>  
                </a>
            </li>
            <li>
                <a href="https://24x7fpga.com/uvm_directory/2024_08_28_12_39_50_uvm_framework_directory" title="uvm">
                    <span> 


                           
                        
                         
                        uvm</span>  
                </a>
            </li>
            <li>
                <a href="https://24x7fpga.com/tags/" title="">
                    <span> 


                           
                        
                            
                    
                    
                    

                    
                    
                    

                    
                    
                    
                    


                    
                    
                    
                    

                    
                    
                    
                    
                    
                    
                    
                    
                
                         
                        
                        <div style="text-decoration: none">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 20"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" style="text-decoration: none">
                            <path d="M21 18V6H8L2 12L8 18H21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 12C12 13.1046 11.1046 14 10 14C8.89543 14 8 13.1046 8 12C8 10.8954 8.89543 10 10 10C11.1046 10 12 10.8954 12 12Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                        <line x1="7" y1="7" x2="7" y2="7"></line>
                        </svg> 
                        </div>
                        </span>  
                </a>
            </li>
        </ul>
    </nav>
</header>







<script src="https://24x7fpga.com/js/mathjax-config.js"></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      Shallow Copy and Deep Copy
    </h1>
    <div class="post-meta"><span title='2024-07-26 09:41:00 -0400 EDT'>July 26, 2024</span>&nbsp;·&nbsp;4 min&nbsp;·&nbsp;697 words&nbsp;·&nbsp;Kiran

</div>
  </header> 
  <div class="post-content"><p><a href="https://github.com/24x7fpga/SystemVerilog_Verification/tree/main">Source</a> &ndash; <a href="/sv_directory/2024_06_27_16_53_00_sv_verification_directory/">SV Verification Directory</a></p>
<h2 id="shallow-copy-and-deep-copy">Shallow Copy and Deep Copy<a hidden class="anchor" aria-hidden="true" href="#shallow-copy-and-deep-copy">#</a></h2>
<p>SystemVerilog provides two means of copying or duplicating objects to keep a method from modifying the original. The two methods are shallow copy and deep copy, and understanding these methods is crucial for effective memory management.</p>
<h3 id="shallow-copy">Shallow Copy<a hidden class="anchor" aria-hidden="true" href="#shallow-copy">#</a></h3>
<p>Shallow copy is a method where the objects are duplicated to a new memory location. If the class contains a handle to another class, only the handle&rsquo;s value is copied not the lower level object, meaning both the original and copied object share the same instances of nested objects.</p>
<h4 id="class-assignment-and-shallow-copy">Class assignment and Shallow Copy<a hidden class="anchor" aria-hidden="true" href="#class-assignment-and-shallow-copy">#</a></h4>
<table>
<thead>
<tr>
<th>Class Assignment</th>
<th>Shallow Copy</th>
</tr>
</thead>
<tbody>
<tr>
<td>obj1 = obj2</td>
<td>obj1 = new obj2</td>
</tr>
<tr>
<td>Both the objects point to the same memory</td>
<td>Allocates memory, copies the variable, and returns the memory handle</td>
</tr>
<tr>
<td>Changes made to any object will reflect in both</td>
<td>Changes made to the copied objects will not reflect in the parent object</td>
</tr>
</tbody>
</table>
<h4 id="example-code-shallow-copy">Example Code: <a href="https://github.com/24x7fpga/SystemVerilog_Verification/blob/main/sv_verification/shallow_copy/tb_shallow_copy.sv">Shallow Copy</a><a hidden class="anchor" aria-hidden="true" href="#example-code-shallow-copy">#</a></h4>
<p>The example shown below shows the example of shallow copy and the <strong>limitation</strong> of nested objects in shallow copy. Along with the difference in class assignment and shallow copy.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-verilog" data-lang="verilog"><span style="display:flex;"><span><span style="color:#75715e">// class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>class grade;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">string</span> mrk;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> new (<span style="color:#66d9ef">string</span> mrk);
</span></span><span style="display:flex;"><span>    this.mrk <span style="color:#f92672">=</span> mrk;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">endfunction</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>endclass
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>class name;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">string</span> student;
</span></span><span style="display:flex;"><span>  grade mrk;                  <span style="color:#75715e">// class handle
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> new (<span style="color:#66d9ef">string</span> student, <span style="color:#66d9ef">string</span> mrk);
</span></span><span style="display:flex;"><span>    this.student <span style="color:#f92672">=</span> student;
</span></span><span style="display:flex;"><span>    this.mrk <span style="color:#f92672">=</span> new(mrk);      <span style="color:#75715e">// construct the object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">endfunction</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>endclass
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">module</span> tb_shallow_copy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  name std1, std2, std3;	  <span style="color:#75715e">// class handle
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">initial</span> <span style="color:#66d9ef">begin</span>
</span></span><span style="display:flex;"><span>    std1 <span style="color:#f92672">=</span> new(<span style="color:#e6db74">&#34;John&#34;</span>, <span style="color:#e6db74">&#34;B&#34;</span>); <span style="color:#75715e">// construct
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    $display(<span style="color:#e6db74">&#34;------------------------- Display -------------------------&#34;</span>);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;STD1 =&gt; Student Name = %s; Grade = %s&#34;</span>, std1.student, std1.mrk.mrk);
</span></span><span style="display:flex;"><span>    std2 <span style="color:#f92672">=</span> new std1;         <span style="color:#75715e">// shallow copy
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    $display(<span style="color:#e6db74">&#34;---------------------- Shallow Copy -----------------------&#34;</span>);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;STD2 =&gt; Student Name = %s; Grade = %s&#34;</span>, std2.student, std2.mrk.mrk);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;------------------ Change Name and Grade ------------------&#34;</span>);
</span></span><span style="display:flex;"><span>    std2.student <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Noah&#34;</span>;
</span></span><span style="display:flex;"><span>    std2.mrk.mrk <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;A&#34;</span>;
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;STD2 =&gt; Student Name = %s; Grade = %s&#34;</span>, std2.student, std2.mrk.mrk);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;---------------- Limitation of Shallow Copy ---------------&#34;</span>);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;STD1 =&gt; Student Name = %s; Grade = %s =&gt; %s&#39;s Grade is also changed&#34;</span>, std1.student, std1.mrk.mrk, std1.student);
</span></span><span style="display:flex;"><span>    std3 <span style="color:#f92672">=</span> std1;
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;--------------------- Class assignment --------------------&#34;</span>);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;STD3 =&gt; Student Name = %s; Grade = %s&#34;</span>, std3.student, std3.mrk.mrk);
</span></span><span style="display:flex;"><span>    std3.student <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Theo&#34;</span>;
</span></span><span style="display:flex;"><span>    std3.mrk.mrk <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;C&#34;</span>;
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;------------------ Change Name and Grade ------------------&#34;</span>);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;STD3 =&gt; Student Name = %s; Grade = %s&#34;</span>, std3.student, std3.mrk.mrk);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;--------------------- Class assignment --------------------&#34;</span>);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;----------------- Points to the same memory ---------------&#34;</span>);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;----------------- Original is also changed ----------------&#34;</span>);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;STD1 =&gt; Student Name = %s; Grade = %s&#34;</span>, std1.student, std1.mrk.mrk);
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">endmodule</span>
</span></span></code></pre></div><p><a href="https://www.edaplayground.com/x/PkaX">Execute the code in EDA Playground</a></p>
<h3 id="deep-copy">Deep Copy<a hidden class="anchor" aria-hidden="true" href="#deep-copy">#</a></h3>
<p>One method to overcome the limitation of shallow copy is to write a copy function inside the class to make a copy of the object. This method is called deep copy, which duplicates not only the object itself but also all the objects referenced by the original object, creating independent copies of these nested objects.</p>
<h4 id="example-code-deep-copy">Example Code: <a href="https://github.com/24x7fpga/SystemVerilog_Verification/blob/main/sv_verification/deep_copy/tb_deep_copy.sv">Deep Copy</a><a hidden class="anchor" aria-hidden="true" href="#example-code-deep-copy">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-verilog" data-lang="verilog"><span style="display:flex;"><span><span style="color:#75715e">// class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>class grade;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">string</span> mrk;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> new(<span style="color:#66d9ef">string</span> mrk);
</span></span><span style="display:flex;"><span>    this.mrk <span style="color:#f92672">=</span> mrk;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">endfunction</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">//deep copy function
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">function</span> grade copy();
</span></span><span style="display:flex;"><span>    copy <span style="color:#f92672">=</span> new(this.mrk);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">endfunction</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>endclass
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#75715e">// class
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>class name;
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">string</span> student;
</span></span><span style="display:flex;"><span>  grade mrk;                     <span style="color:#75715e">// class handle
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">function</span> new(<span style="color:#66d9ef">string</span> student, <span style="color:#66d9ef">string</span> mrk);
</span></span><span style="display:flex;"><span>    this.student <span style="color:#f92672">=</span> student;
</span></span><span style="display:flex;"><span>    this.mrk <span style="color:#f92672">=</span> new(mrk);         <span style="color:#75715e">// construct the object
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">endfunction</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  <span style="color:#75715e">// deep copy function
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>  <span style="color:#66d9ef">function</span> name copy();
</span></span><span style="display:flex;"><span>    copy <span style="color:#f92672">=</span> new(this.student, this.mrk.mrk);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">endfunction</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>endclass
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">module</span> tb_deep_copy;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span>  name std1, std2;	       <span style="color:#75715e">// class handle
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">initial</span> <span style="color:#66d9ef">begin</span>
</span></span><span style="display:flex;"><span>    std1 <span style="color:#f92672">=</span> new(<span style="color:#e6db74">&#34;John&#34;</span>, <span style="color:#e6db74">&#34;B&#34;</span>);     <span style="color:#75715e">// construct
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    $display(<span style="color:#e6db74">&#34;------------------------- Display -------------------------&#34;</span>);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;STD1 =&gt; Student Name = %s; Grade = %s&#34;</span>, std1.student, std1.mrk.mrk);
</span></span><span style="display:flex;"><span>    std2 <span style="color:#f92672">=</span> std1.copy();          <span style="color:#75715e">// deep copy
</span></span></span><span style="display:flex;"><span><span style="color:#75715e"></span>    $display(<span style="color:#e6db74">&#34;----------------------- Deep Copy -------------------------&#34;</span>);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;STD2 =&gt; Student Name = %s; Grade = %s&#34;</span>, std2.student, std2.mrk.mrk);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;------------------ Change Name and Grade ------------------&#34;</span>);
</span></span><span style="display:flex;"><span>    std2.student <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;Noah&#34;</span>;
</span></span><span style="display:flex;"><span>    std2.mrk.mrk <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;A&#34;</span>;
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;STD2 =&gt; Student Name = %s; Grade = %s&#34;</span>, std2.student, std2.mrk.mrk);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;------------------ Advantage of Deep Copy -----------------&#34;</span>);
</span></span><span style="display:flex;"><span>    $display(<span style="color:#e6db74">&#34;STD1 =&gt; Student Name = %s; Grade = %s =&gt; %s&#39;s Grade is NOT changed&#34;</span>, std1.student, std1.mrk.mrk, std1.student);
</span></span><span style="display:flex;"><span>  <span style="color:#66d9ef">end</span>
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">endmodule</span>
</span></span></code></pre></div><p><a href="https://www.edaplayground.com/x/vce5">Execute the code in EDA Playground</a></p>
<h3 id="point-to-remember">Point to Remember<a hidden class="anchor" aria-hidden="true" href="#point-to-remember">#</a></h3>
<h4 id="shallow-copy">Shallow Copy:<a hidden class="anchor" aria-hidden="true" href="#shallow-copy">#</a></h4>
<ul>
<li>Copies the object’s attributes but not the nested objects.</li>
<li>Shared references to nested objects, leading to potential side effects.</li>
<li>Faster to create but less independent.</li>
</ul>
<h4 id="deep-copy">Deep Copy:<a hidden class="anchor" aria-hidden="true" href="#deep-copy">#</a></h4>
<ul>
<li>Copies the object and all nested objects, creating entirely independent instances.</li>
<li>No shared references, avoiding unintended side effects.</li>
<li>More computationally intensive but safer for independent object manipulation.</li>
</ul>


  </div>



  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://24x7fpga.com/tags/sv/">sv</a></li>
    </ul>



    <div class="bottom-line" ></div>
    
    
    
      <img src="/img/org_mode.png" class="center" alt="footer" style="max-width:50px" />
    

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2024 <a href="https://24x7fpga.com/"></a></span>
        
        


</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><footer class="footer">

</footer>



<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
