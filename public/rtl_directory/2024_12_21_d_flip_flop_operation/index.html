<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>D Flip-Flop: Operation | Home</title>
<meta name="keywords" content="rtl, sta">
<meta name="description" content="Source &ndash; RTL Design Directory

A flip-flop, also known as a register, is a fundamental building block in digital circuits used to store a single bit of data. The stored data remains stable until a new input is latched, triggered by an external clock signal. Depending on the design, the data is captured on either the rising edge or falling edge of the clock, making flip-flops essential for synchronizing data in sequential logic circuits.">
<meta name="author" content="Kiran">
<link rel="canonical" href="https://24x7fpga.com/rtl_directory/2024_12_21_d_flip_flop_operation/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.28ee19e1ed9d982499c62390d2acb416195f5655651bae2a84b5090fab8908e0.css" integrity="sha256-KO4Z4e2dmCSZxiOQ0qy0FhlfVlVlG64qhLUJD6uJCOA=" rel="preload stylesheet" as="style">
<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">

<link rel="icon" href="https://24x7fpga.com/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://24x7fpga.com/assets/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://24x7fpga.com/assets/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://24x7fpga.com/assets/apple-touch-icon.png">
<link rel="mask-icon" href="https://24x7fpga.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://24x7fpga.com/rtl_directory/2024_12_21_d_flip_flop_operation/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>

<link rel="stylesheet" href="../../zcustom.css">


<meta property="og:title" content="D Flip-Flop: Operation" />
<meta property="og:description" content="Source &ndash; RTL Design Directory

A flip-flop, also known as a register, is a fundamental building block in digital circuits used to store a single bit of data. The stored data remains stable until a new input is latched, triggered by an external clock signal. Depending on the design, the data is captured on either the rising edge or falling edge of the clock, making flip-flops essential for synchronizing data in sequential logic circuits." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://24x7fpga.com/rtl_directory/2024_12_21_d_flip_flop_operation/" /><meta property="article:section" content="rtl_directory" />
<meta property="article:published_time" content="2024-12-21T17:41:00-05:00" />
<meta property="article:modified_time" content="2024-12-21T17:41:00-05:00" />



<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="D Flip-Flop: Operation"/>
<meta name="twitter:description" content="Source &ndash; RTL Design Directory

A flip-flop, also known as a register, is a fundamental building block in digital circuits used to store a single bit of data. The stored data remains stable until a new input is latched, triggered by an external clock signal. Depending on the design, the data is captured on either the rising edge or falling edge of the clock, making flip-flops essential for synchronizing data in sequential logic circuits."/>

<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [
    {
      "@type": "ListItem",
      "position":  1 ,
      "name": "Rtl_directories",
      "item": "https://24x7fpga.com/rtl_directory/"
    }, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "D Flip-Flop: Operation",
      "item": "https://24x7fpga.com/rtl_directory/2024_12_21_d_flip_flop_operation/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "D Flip-Flop: Operation",
  "name": "D Flip-Flop: Operation",
  "description": "Source \u0026ndash; RTL Design Directory\nA flip-flop, also known as a register, is a fundamental building block in digital circuits used to store a single bit of data. The stored data remains stable until a new input is latched, triggered by an external clock signal. Depending on the design, the data is captured on either the rising edge or falling edge of the clock, making flip-flops essential for synchronizing data in sequential logic circuits.\n",
  "keywords": [
    "rtl", "sta"
  ],
  "articleBody": "Source – RTL Design Directory\nA flip-flop, also known as a register, is a fundamental building block in digital circuits used to store a single bit of data. The stored data remains stable until a new input is latched, triggered by an external clock signal. Depending on the design, the data is captured on either the rising edge or falling edge of the clock, making flip-flops essential for synchronizing data in sequential logic circuits.\nFigure 1: D Flip-Flop\nThe truth table of a simple D-FF is shown below:\nCLK D Q Q' Description LOW (falling edge) X Q Q' No Change HIGH (rising edge) 0 0 1 Reset Q -\u003e 0 HIGH (rising edge) 1 1 0 Set Q -\u003e 1 The D-FF behavior is controlled by a clock signal. When the clock is low, the output remains unchanged, regardless of the input. The flip-flop simply holds or stores its previous value. When the clock is high, the flip-flop becomes active. On the rising edge of the clock, the output follows the input, capturing its value in the next clock cycle.\nFigure 2: D-FF Waveform\nTransmission Gate Before diving into the internal structure of the D flip-flop, let’s take a moment to revisit the concept of the transmission gate.\nA transmission gate is a fundamental building block in digital design, often used for constructing latches and flip-flops. It acts as an electronic switch that allows or blocks the flow of signals based on a control input. Understanding how a transmission gate works will provide valuable insight into the inner workings of a D flip-flop.\nFigure 3: Transmission Gate\nThe table below summarizes the swithcing behavior of the PMOS and NMOS transistors. This interplay determines whether the transmission gate is turned on (conducting) or off (blocking):\nGate Input PMOS NMOS 0 ON OFF 1 OFF ON By utilizing the complementary behavior of PMOS and NMOS transistors, the transmission gate ensurese efficient signal transfer while minimizing distortion and power loss.\nThe truth table below illustrates the functionality of a transmission gate.\nWhen the control signal is set to high, the input signal A is passed directly to the output B, enabling signal transmission. Conversely, when the control signal is set to low, the gate is open, and the output remains in a high-impedance Z state, effectively disconnecting the input and output. Control A B 1 0 0 1 1 1 0 0 Z 0 1 Z With this foundation, let’s now explore the internal structure of the D flip-flop in detail.\nOperation To fully grasp the operation of a D flip-flop, it’s helpful to examine its internal structure. At its core, the D flip-flop consists of two latches connected in series: a master latch and a slave latch.\nAs shown in Figure 3, the master latch is active during one phase of the clock cycle, while the slave latch operates during the opposite phase. This configuration ensures that data is reliably captured and transferred at the clock’s rising or falling edge, depending on the design.\nFigure 4: D Flip-Flop Internal Structure\nThe master-slave arrangement is the key to the D flip-flop’s edge-triggered behavior, making it a vital component in digital systems for storing and synchronizing data. The configuration shown in Figure 4 consists of a negative D latch (active when the clock is low) as the master, cascaded with a positive D latch (active when the clock is high) as the slave. Together, these latches operate in sequence to form a positive edge-triggered D flip-flop ensureing the data is captured only on the rising edge of the clock.\nWhen working with transmission gates, it is crucial to carefully consider the clock connection and its polarity relative to the control signal. The correct configuration ensures that the transmission gate operates as intended, enabling or disabling signal flow at precise moments within the clock cycle. A misconfigured clock or polarity mismatch can lead to incorrect behavior.\nCLOCK LOW Figure 5 illustrates the internal structure of a D Flip-Flop when the clock signal is low.\nMaster D Latch Operation: When the clock signal is low, the master D latch captures the input data. The data flows sequentially through the internal points labeled A, B, C, and D, ensuring the latch is updated with the input value.\nSlave D Latch Operation: During this time, the slave D latch holds the previous value, as its internal points W, X, Y, and Z remain disconnected from the new data. This mechanism prevents the output from changing until the clock signal transitions.\nFigure 5: Clock is LOW\nCLOCK HIGH Figure 6 illustrates the internal structure of a D Flip-Flop when the clock signal is high.\nMaster D Latch Operation: When the clock signal transitions to high, the master D latch holds the data captured during the previous low clock phase. From the diagram, the data follows the path A → B → C → D, where points A and D are connected to ensure the data is securely stored.\nSlave D Latch Operation: At this stage, the slave D latch becomes active, and the data path extends from points B → W → X. The output of the flip-flop is sourced directly from the master D latch, allowing the stored data to be propagated. During the clock low phase this data will be stored in the slave latch.\nFigure 6: Clock is HIGH\n",
  "wordCount" : "894",
  "inLanguage": "en",
  "datePublished": "2024-12-21T17:41:00-05:00",
  "dateModified": "2024-12-21T17:41:00-05:00",
  "author":[{
    "@type": "Person",
    "name": "Kiran"
  }],
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://24x7fpga.com/rtl_directory/2024_12_21_d_flip_flop_operation/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Home",
    "logo": {
      "@type": "ImageObject",
      "url": "https://24x7fpga.com/favicon.ico"
    }
  }
}
</script><link rel="stylesheet" href="/css/syntax.css" !important>

</head>

<body class="" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "dark") {
        document.body.classList.add('dark');
    }

</script>


<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://24x7fpga.com/" accesskey="h" title="Home (Alt + H)">Home</a>
            
            
            <div class="vertical-line" style="height: 20px;"></div>
            
            
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://24x7fpga.com/rtl_directory/2024_06_05_00_21_53_rtl_design_directory" title="rtl">
                    <span> 


                           
                        
                         
                        rtl</span>  
                </a>
            </li>
            <li>
                <a href="https://24x7fpga.com/sv_directory/2024_06_27_16_53_00_sv_verification_directory" title="sv">
                    <span> 


                           
                        
                         
                        sv</span>  
                </a>
            </li>
            <li>
                <a href="https://24x7fpga.com/uvm_directory/2024_08_28_12_39_50_uvm_framework_directory" title="uvm">
                    <span> 


                           
                        
                         
                        uvm</span>  
                </a>
            </li>
            <li>
                <a href="https://24x7fpga.com/tags/" title="">
                    <span> 


                           
                        
                            
                    
                    
                    

                    
                    
                    

                    
                    
                    
                    


                    
                    
                    
                    

                    
                    
                    
                    
                    
                    
                    
                    
                
                         
                        
                        <div style="text-decoration: none">
                        <svg xmlns="http://www.w3.org/2000/svg" width="14" height="14" viewBox="0 0 24 15"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round" style="text-decoration: none">
                            <path d="M21 18V6H8L2 12L8 18H21Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M12 12C12 13.1046 11.1046 14 10 14C8.89543 14 8 13.1046 8 12C8 10.8954 8.89543 10 10 10C11.1046 10 12 10.8954 12 12Z" stroke="currentColor" stroke-width="1.2" stroke-linecap="round" stroke-linejoin="round"/>
                        <line x1="7" y1="7" x2="7" y2="7"></line>
                        </svg> 
                        </div>
                        </span>  
                </a>
            </li>
        </ul>
    </nav>
</header>







<script src="https://24x7fpga.com/js/mathjax-config.js"></script>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml.js"></script>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      D Flip-Flop: Operation
    </h1>
    <div class="post-meta"><span title='2024-12-21 17:41:00 -0500 EST'>December 21, 2024</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;894 words&nbsp;·&nbsp;Kiran

</div>
  </header> 
  <div class="post-content"><p><a href="https://github.com/24x7fpga/RTL/tree/master/rtl_designs/d_ff_en">Source</a> &ndash; <a href="/rtl_directory/2024_06_05_00_21_53_rtl_design_directory/">RTL Design Directory</a></p>
<h2 id="d41d8c"><a hidden class="anchor" aria-hidden="true" href="#d41d8c">#</a></h2>
<p>A <strong>flip-flop</strong>, also known as a register, is a fundamental building block in digital circuits used to store a single bit of data. The stored data remains stable until a new input is latched, triggered by an external clock signal. Depending on the design, the data is captured on either the rising edge or falling edge of the clock, making flip-flops essential for synchronizing data in sequential logic circuits.</p>
<figure class="center !important">
    <img loading="lazy" src="/ox-hugo/d_ff.svg"
         alt="Figure 1: D Flip-Flop" width="400px"/> <figcaption>
            <p><span class="figure-number">Figure 1: </span>D Flip-Flop</p>
        </figcaption>
</figure>

<p>The truth table of a simple D-FF is shown below:</p>
<table>
  <thead>
      <tr>
          <th>CLK</th>
          <th>D</th>
          <th>Q</th>
          <th>Q'</th>
          <th>Description</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>LOW  (falling edge)</td>
          <td>X</td>
          <td>Q</td>
          <td>Q'</td>
          <td>No Change</td>
      </tr>
      <tr>
          <td>HIGH (rising edge)</td>
          <td>0</td>
          <td>0</td>
          <td>1</td>
          <td>Reset Q -&gt; 0</td>
      </tr>
      <tr>
          <td>HIGH (rising edge)</td>
          <td>1</td>
          <td>1</td>
          <td>0</td>
          <td>Set Q -&gt; 1</td>
      </tr>
  </tbody>
</table>
<p>The D-FF behavior is controlled by a clock signal. When the clock is <strong>low</strong>, the output remains unchanged, regardless of the input. The flip-flop simply holds or stores its previous value. When the clock is <strong>high</strong>, the flip-flop becomes active. On the rising edge of the clock, the output follows the input, capturing its value in the next clock cycle.</p>
<figure>
    <img loading="lazy" src="/ox-hugo/ff_wave.svg"
         alt="Figure 2: D-FF Waveform"/> <figcaption>
            <p><span class="figure-number">Figure 2: </span>D-FF Waveform</p>
        </figcaption>
</figure>

<h3 id="transmission-gate">Transmission Gate<a hidden class="anchor" aria-hidden="true" href="#transmission-gate">#</a></h3>
<p>Before diving into the internal structure of the D flip-flop, let&rsquo;s take a moment to revisit the concept of the transmission gate.</p>
<p>A transmission gate is a fundamental building block in digital design, often used for constructing latches and flip-flops. It acts as an electronic switch that allows or blocks the flow of signals based on a control input. Understanding how a transmission gate works will provide valuable insight into the inner workings of a D flip-flop.</p>
<figure class="center !important">
    <img loading="lazy" src="/ox-hugo/trans_gate.svg"
         alt="Figure 3: Transmission Gate"/> <figcaption>
            <p><span class="figure-number">Figure 3: </span>Transmission Gate</p>
        </figcaption>
</figure>

<p>The table below summarizes the swithcing behavior of the PMOS and NMOS transistors. This interplay determines whether the transmission gate is turned on (conducting) or off (blocking):</p>
<table>
  <thead>
      <tr>
          <th>Gate Input</th>
          <th>PMOS</th>
          <th>NMOS</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>0</td>
          <td>ON</td>
          <td>OFF</td>
      </tr>
      <tr>
          <td>1</td>
          <td>OFF</td>
          <td>ON</td>
      </tr>
  </tbody>
</table>
<p>By utilizing the complementary behavior of PMOS and NMOS transistors, the transmission gate ensurese efficient signal transfer while minimizing distortion and power loss.</p>
<p>The truth table below illustrates the functionality of a transmission gate.</p>
<ul>
<li>When the <code>control</code> signal is set to <strong>high</strong>, the input signal <code>A</code> is passed directly to the output <code>B</code>, enabling signal transmission.</li>
<li>Conversely, when the control signal is set to <strong>low</strong>, the gate is open, and the output remains in a high-impedance <code>Z</code> state, effectively disconnecting the input and output.</li>
</ul>
<table>
  <thead>
      <tr>
          <th>Control</th>
          <th>A</th>
          <th>B</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>1</td>
          <td>0</td>
          <td>0</td>
      </tr>
      <tr>
          <td>1</td>
          <td>1</td>
          <td>1</td>
      </tr>
      <tr>
          <td>0</td>
          <td>0</td>
          <td>Z</td>
      </tr>
      <tr>
          <td>0</td>
          <td>1</td>
          <td>Z</td>
      </tr>
  </tbody>
</table>
<p>With this foundation, let’s now explore the internal structure of the D flip-flop in detail.</p>
<h3 id="operation">Operation<a hidden class="anchor" aria-hidden="true" href="#operation">#</a></h3>
<p>To fully grasp the operation of a D flip-flop, it&rsquo;s helpful to examine its internal structure. At its core, the D flip-flop consists of two latches connected in series: a master latch and a slave latch.</p>
<p>As shown in Figure 3, the master latch is active during one phase of the clock cycle, while the slave latch operates during the opposite phase. This configuration ensures that data is reliably captured and transferred at the clock&rsquo;s rising or falling edge, depending on the design.</p>
<figure>
    <img loading="lazy" src="/ox-hugo/ff.svg"
         alt="Figure 4: D Flip-Flop Internal Structure"/> <figcaption>
            <p><span class="figure-number">Figure 4: </span>D Flip-Flop Internal Structure</p>
        </figcaption>
</figure>

<p>The master-slave arrangement is the key to the D flip-flop’s edge-triggered behavior, making it a vital component in digital systems for storing and synchronizing data. The configuration shown in Figure 4 consists of a negative D latch (active when the clock is low) as the master, cascaded with a positive D latch (active when the clock is high) as the slave. Together, these latches operate in sequence to form a positive edge-triggered D flip-flop ensureing the data is captured only on the rising edge of the clock.</p>
<p>When working with transmission gates, it is crucial to <strong>carefully</strong> consider the clock <code>connection</code> and its <code>polarity</code> relative to the control signal. The correct configuration ensures that the transmission gate operates as intended, enabling or disabling signal flow at precise moments within the clock cycle. A misconfigured clock or polarity mismatch can lead to incorrect behavior.</p>
<h4 id="clock-low">CLOCK LOW<a hidden class="anchor" aria-hidden="true" href="#clock-low">#</a></h4>
<p>Figure 5 illustrates the internal structure of a D Flip-Flop when the clock signal is <strong>low</strong>.</p>
<ul>
<li>
<p>Master D Latch Operation: When the clock signal is low, the master D latch captures the input data. The data flows sequentially through the internal points labeled A, B, C, and D, ensuring the latch is updated with the input value.</p>
</li>
<li>
<p>Slave D Latch Operation: During this time, the slave D latch holds the previous value, as its internal points W, X, Y, and Z remain disconnected from the new data. This mechanism prevents the output from changing until the clock signal transitions.</p>
</li>
</ul>
<figure>
    <img loading="lazy" src="/ox-hugo/ff_animate_low.svg"
         alt="Figure 5: Clock is LOW"/> <figcaption>
            <p><span class="figure-number">Figure 5: </span>Clock is LOW</p>
        </figcaption>
</figure>

<h4 id="clock-high">CLOCK HIGH<a hidden class="anchor" aria-hidden="true" href="#clock-high">#</a></h4>
<p>Figure 6 illustrates the internal structure of a D Flip-Flop when the clock signal is <strong>high</strong>.</p>
<ul>
<li>
<p>Master D Latch Operation: When the clock signal transitions to high, the master D latch holds the data captured during the previous low clock phase. From the diagram, the data follows the path A → B → C → D, where points A and D are connected to ensure the data is securely stored.</p>
</li>
<li>
<p>Slave D Latch Operation: At this stage, the slave D latch becomes active, and the data path extends from points B → W → X. The output of the flip-flop is sourced directly from the master D latch, allowing the stored data to be propagated. During the clock low phase this data will be stored in the slave latch.</p>
</li>
</ul>
<figure>
    <img loading="lazy" src="/ox-hugo/ff_animate_high.svg"
         alt="Figure 6: Clock is HIGH"/> <figcaption>
            <p><span class="figure-number">Figure 6: </span>Clock is HIGH</p>
        </figcaption>
</figure>



  </div>



  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://24x7fpga.com/tags/rtl/">Rtl</a></li>
      <li><a href="https://24x7fpga.com/tags/sta/">Sta</a></li>
    </ul>



    <div class="bottom-line" ></div>
    
    
    
      <img src="/img/org_mode.png" class="center" alt="footer" style="max-width:50px" />
    

  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://24x7fpga.com/"></a></span>
        
        


</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a><footer class="footer">

</footer>



<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerHTML = 'copy';

        function copyingDone() {
            copybutton.innerHTML = 'copied!';
            setTimeout(() => {
                copybutton.innerHTML = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
</body>

</html>
